% (c) 2007-2008 David Roberts

% TODO
% - clean up the code *a lot*

\usepackage{tikz}
\usepackage{ifthen}

\newcommand{\glasswarefillamount}{0}

\newcommand{\glassware}[2][]{
 \begin{scope}[{#1},glassware]
 \ifthenelse{\equal{#2}{bunsen}} {
  \filldraw (-1.55,0) -- (-1.55,0.2)  -- (-0.45,0.7)  -- (-0.45,1.4)  -- (0.45,1.4)
                  -- (0.45,0.7) -- (1.55,0.2) -- (1.55,0) -- cycle; % base
  \filldraw (-0.4,1.4) rectangle (0.4,3.8); % neck
  \filldraw (-0.45,3.8) rectangle (0.45,4.8); % head
 }{\ifthenelse{\equal{#2}{tripod}} {
  \filldraw (-2,0) -- (-1.3,5.1) -- (-1.8,5.1) -- (-1.8,5.3) -- (1.8,5.3)
               -- (1.8,5.1)  -- (1.3,5.1) -- (2,0) -- (1.8,0)
               -- (1.1,5.1) -- (-1.1,5.1) -- (-1.8,0) -- cycle;
 }{\ifthenelse{\equal{#2}{crucible}} {
  \draw (-0.7,1.4) .. controls (-0.7,1) and (-0.8,0) .. (-0.4,0)
     -- (0.4,0)    .. controls (0.8,0) and (0.7,1)  ..  (0.7,1.4);
 }{\ifthenelse{\equal{#2}{crucible lid}} {
  \draw (-0.8,-0.15) .. controls (-0.8,0.15) .. (-0.65,0.15)
     -- (0.65,0.15)   .. controls (0.8,0.15)  .. (0.8,-0.15);
 }{\ifthenelse{\equal{#2}{metal coil}} {
  \filldraw (-0.3,0.1) rectangle (0.3,0.3);
  \filldraw (-0.3,0.1) -- (-0.3,0.3) arc (-90:-60:0.9) -- ++(-60:0.2) arc (-60:-90:1.1) -- cycle;
 }{\ifthenelse{\equal{#2}{dropper}} {
  \filldraw[rounded corners]
            (-0.1,0)  -- (-0.2,2.4)  -- (-0.3,2.7) -- (-0.35,4.5)
         -- (0.35,4.5)  -- (0.3,2.7)  -- (0.2,2.4)   -- (0.1,0) -- cycle;
 }{\ifthenelse{\equal{#2}{beaker}} {
  \draw[rounded corners]
        (-1.5,3) -- (-1.3,3) -- (-1.3,0) -- (1.3,0) -- (1.3,3) -- (1.5,3);
  \ifthenelse{\equal{\glasswarefillamount}{0}}{}{
   \filldraw
        [yscale=2.8] (-1.3,\glasswarefillamount)
        [rounded corners] -- (-1.3,0) -- (1.3,0)
        [sharp corners] -- (1.3,\glasswarefillamount) -- cycle;
  }
 }{\ifthenelse{\equal{#2}{testtube}} {
  \ifthenelse{\equal{\glasswarefillamount}{0}}{}{
   \fill[yscale=2.8] (-0.3,\glasswarefillamount) -- (-0.3,0.1071428571) -- (0.3,0.1071428571) -- (0.3,\glasswarefillamount) -- cycle; % 0.1071428571 = 0.3/2.8
   \fill (-0.3,0.3) [rounded corners] -- (-0.3,0.3) arc (-180:0:0.3) -- (0.3,0.3) [sharp corners] -- (0.3,0.3) -- cycle;
   \draw[yscale=2.8] (-0.3,\glasswarefillamount) -- (0.3,\glasswarefillamount);
  }
  \draw[rounded corners]
        (-0.5,3) -- (-0.3,3) -- (-0.3,0.3) arc (-180:0:0.3) -- (0.3,3) -- (0.5,3);
 }{\ifthenelse{\equal{#2}{stopper}} {
  \draw (-0.35,0.8) -- (-0.25,0) -- (0.25,0) -- (0.35,0.8) -- cycle;
 }{\ifthenelse{\equal{#2}{pile}} {
  \filldraw (-0.3,0.1) -- (0.3,0.1) -- (0.1, 0.3) arc (45:135:0.141421) -- cycle; % 0.141421 = 0.2/sqrt(2)
 }{}}}}}}}}}}
 \end{scope}
}
